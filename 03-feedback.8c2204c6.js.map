{"mappings":"6mBAAA,IAAAA,EAAAC,EAAA,S,aAEIC,EAAS,CACXC,MAAO,GACPC,QAAS,IAELC,EAAc,sBAEdC,EAAcC,SAASC,cAAc,kBACrCC,EAAWF,SAASC,cAAc,gBAClCE,EAASH,SAASC,cAAc,UAEtCF,EAAYK,iBAAiB,SAAS,SAAAC,GACpCV,EAAOE,QAAUQ,EAAMC,cAAcC,MAClBC,EAAAC,UAAW,WAC5BhB,EAAAiB,KAAcZ,EAAaH,E,GAC1B,IACHgB,E,IAGFT,EAASE,iBAAiB,SAAS,SAAAC,GACjCV,EAAOC,MAAQS,EAAMC,cAAcC,MACnCK,WAAWnB,EAAAiB,KAAcZ,EAAaH,GAAS,I,IAGjDQ,EAAOC,iBAAiB,SAAS,SAAAS,GAC/BA,EAAEC,iBAEqB,KAAnBZ,EAASK,OAAsC,KAAtBR,EAAYQ,MACvCQ,MAAM,iCAEAb,EAASK,MAAMS,SAAS,MAAQd,EAASK,MAAMS,SAAS,MAG5DvB,EAAAiB,KAAcZ,EAAaH,GAC3BsB,QAAQC,IAAI,UAAqCC,OAA3BxB,EAAOC,MAAM,gBAA6BuB,OAAfxB,EAAOE,QAAQ,OAChEuB,aAAaC,QACbtB,EAAYQ,MAAQL,EAASK,MAAQ,GACrCZ,EAAOE,QAAUF,EAAOC,MAAQ,IANhCmB,MAAM,2C,IAWPK,aAAaE,QAAQxB,KAGxBC,EAAYQ,MAAQd,EAAA8B,KAAczB,GAAaD,QAC/CK,EAASK,MAAQd,EAAA8B,KAAczB,GAAaF,M,4HC/C9C,IAAM4B,EAAO,SAACC,EAAKlB,GACjB,IACE,IAAMmB,EAAkBC,KAAKC,UAAUrB,GACvCa,aAAaS,QAAQJ,EAAKC,E,CAC1B,MAAOI,GACPb,QAAQa,MAAM,oBAAqBA,EAAMjC,Q,GAIvCkC,EAAO,SAAAN,GACX,IACE,IAAMC,EAAkBN,aAAaE,QAAQG,GAC7C,OAA2B,OAApBC,OAA2BM,EAAYL,KAAKM,MAAMP,E,CACzD,MAAOI,GACPb,QAAQa,MAAM,oBAAqBA,EAAMjC,Q","sources":["src/js/03-feedback.js","src/js/storage.js"],"sourcesContent":["import * as Storages from './storage.js';\nconst _ = require('lodash');\nlet objNow = {\n  email: [],\n  message: [],\n};\nconst storageName = 'feedback-form-state';\n\nconst messagesUrl = document.querySelector('[name=message]');\nconst emailUrl = document.querySelector('[name=email]');\nconst btnUrl = document.querySelector('button');\n\nmessagesUrl.addEventListener('input', event => {\n  objNow.message = event.currentTarget.value;\n  const throt_fun1 = _.throttle(function () {\n    Storages.save(storageName, objNow);\n  }, 500);\n  throt_fun1();\n});\n\nemailUrl.addEventListener('input', event => {\n  objNow.email = event.currentTarget.value;\n  setTimeout(Storages.save(storageName, objNow), 500);\n});\n\nbtnUrl.addEventListener('click', e => {\n  e.preventDefault();\n\n  if (emailUrl.value === '' || messagesUrl.value === '') {\n    alert('Please fill  email or message');\n  } else {\n    if (!(emailUrl.value.includes('@') && emailUrl.value.includes('.'))) {\n      alert('Please fill in the email field correctly');\n    } else {\n      Storages.save(storageName, objNow);\n      console.log(`email: ${objNow.email}\\n message: ${objNow.message}\\n`);\n      localStorage.clear();\n      messagesUrl.value = emailUrl.value = '';\n      objNow.message = objNow.email = [];\n    }\n  }\n});\n\nif (!localStorage.getItem(storageName)) {\n  return;\n} else {\n  messagesUrl.value = Storages.load(storageName).message;\n  emailUrl.value = Storages.load(storageName).email;\n}\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport { save, load };\n"],"names":["$jzQFI","parcelRequire","objNow","email","message","storageName","messagesUrl","document","querySelector","emailUrl","btnUrl","addEventListener","event","currentTarget","value","$1WSnx","throttle","save","throt_fun1","setTimeout","e","preventDefault","alert","includes","console","log","concat","localStorage","clear","getItem","load","$e40a24b7fc93604f$export$a1544dad697b423d","key","serializedState","JSON","stringify","setItem","error","$e40a24b7fc93604f$export$11e63f7b0f3d9900","undefined","parse"],"version":3,"file":"03-feedback.8c2204c6.js.map"}